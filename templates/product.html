<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fish Form</title>
</head>
<body>
    <form id="fish-form">
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Name</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input type="text" name="date" /></td>
                    <td><input type="text" name="name" /></td>
                </tr>
                <tr>
                    <td><input type="text" name="date" /></td>
                    <td><input type="text" name="name" /></td>
                </tr>
                <tr>
                    <td><input type="text" name="date" /></td>
                    <td><input type="text" name="name" /></td>
                </tr>
                <!-- 可以自行增加或減少筆數 -->
            </tbody>
        </table>
        <button type="submit">Submit</button>
    </form>
    <script>
        const form = document.getElementById('fish-form');
        form.addEventListener('submit', async (event) => {
            event.preventDefault();
            const formData = new FormData(form);
            const data = [];
            formData.forEach((value, key) => {
                data.push({[key]: value});
            });

            const response = await fetch('/fish', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data),
            });
            const result = await response.json();
            console.log(result);
            alert(result.message)
        });
    </script>
</body>
</html>